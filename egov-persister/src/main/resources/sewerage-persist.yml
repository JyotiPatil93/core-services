serviceMaps:
 serviceName: Sewerage Connection Service
 mappings:
 - version: 1.0
   name: SewerageConnection
   description: create ConnectionDetails in connection and sewarage_service_connection
   fromTopic: createSewerageConnection
   isTransaction: true
   queryMaps: 
    - query: INSERT INTO connection (id, tenantid, property_id, applicationno, applicationstatus, status, connectionno, oldconnectionno, documents_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?);
      basePath: $.SewerageConnection
      jsonMaps:
       - jsonPath: $.SewerageConnection.id 

       - jsonPath: $.SewerageConnection.property.tenantId
        
       - jsonPath: $.SewerageConnection.property.id

       - jsonPath: $.SewerageConnection.applicationNo
        
       - jsonPath: $.SewerageConnection.applicationStatus

       - jsonPath: $.SewerageConnection.status

       - jsonPath: $.SewerageConnection.connectionNo

       - jsonPath: $.SewerageConnection.oldConnectionNo
      
       - jsonPath: $.SewerageConnection.documents.*.id

    - query: INSERT INTO sewarage_service_connection(connection_id,connectionexecutiondate,noofwaterclosets,nooftoilets,uom,connectiontype,calculationattribute) VALUES(?,?,?,?,?,?,?);
      basePath: $.SewerageConnection
      jsonMaps:

       - jsonPath: $.SewerageConnection.id

       - jsonPath: $.SewerageConnection.connectionexecutiondate

       - jsonPath: $.SewerageConnection.noofwaterclosets
        
       - jsonPath: $.SewerageConnection.nooftoilets
         
       - jsonPath: $.SewerageConnection.uom
         
       - jsonPath: $.SewerageConnection.connectiontype
         
       - jsonPath: $.SewerageConnection.calculationattribute

 - version: 1.0
   name: WaterConnection
   description: update ConnectionDetails in connection and water_service_connection
   fromTopic: updateWaterConnection
   isTransaction: true
   queryMaps: 
    - query: UPDATE connection SET property_id=?, applicationNo=?, applicationStatus=?, status=?, connectionNo=?, oldConnectionNo=?, documents_id=? WHERE id=?;
      basePath: $.WaterConnection
      jsonMaps:
       - jsonPath: $.WaterConnection.id 
        
       - jsonPath: $.WaterConnection.property.id

       - jsonPath: $.WaterConnection.applicationNo
        
       - jsonPath: $.WaterConnection.applicationStatus

       - jsonPath: $.WaterConnection.status

       - jsonPath: $.WaterConnection.connectionNo

       - jsonPath: $.WaterConnection.oldConnectionNo

       - jsonPath: $.WaterConnection.documents.*.id      

    - query: UPDATE water_service_connection SET connectionCategory=?,rainWaterHarvesting=?,connectionType=?,waterSource=?,meterId=?,meterInstallationDate=? WHERE connection_id=?;
      basePath: $.WaterConnection
      jsonMaps:

       
       - jsonPath: $.WaterConnection.connectionCategory
         

       - jsonPath: $.WaterConnection.rainWaterHarvesting
         type: BOOLEAN 
         dbType: BOOLEAN
         
       - jsonPath: $.WaterConnection.connectionType
         
       - jsonPath: $.WaterConnection.waterSource
         
       - jsonPath: $.WaterConnection.meterId
         
       - jsonPath: $.WaterConnection.meterInstallationDate
       - jsonPath: $.WaterConnection.id


